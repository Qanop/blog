{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/using-github-actions","result":{"data":{"markdownRemark":{"id":"f82c860d-50f5-58d3-9f5e-18e1612feb5c","html":"<p>When creating pipelines, we often use already-made code weâ€™ve written ourselves in previous projects. Whether it is CircleCi, BitBucket Pipelines, AWS CodeBuild or GitHub Actions. The problem is when our cloud environment updates and no longer has the old libraries we used.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1cc432d60f7f229c9e8cb1c1488fcd85/47311/server-11.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGfhupIIB//xAAbEAABBAMAAAAAAAAAAAAAAAABAAIEMRESMv/aAAgBAQABBQIU/AOybxJtf//EABgRAAIDAAAAAAAAAAAAAAAAAAABAhEh/9oACAEDAQE/AZYyz//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPwERf//EABcQAQEBAQAAAAAAAAAAAAAAAAEQEQD/2gAIAQEABj8C3BK8T//EABsQAQEAAgMBAAAAAAAAAAAAAAEAUaEhMUGR/9oACAEBAAE/IVwXyrwEcSDLbZaE93//2gAMAwEAAgADAAAAEEPf/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERIf/aAAgBAwEBPxDDCz//xAAWEQADAAAAAAAAAAAAAAAAAAAQESH/2gAIAQIBAT8Qph//xAAeEAEAAQQCAwAAAAAAAAAAAAABABEhMXEQoWHB8P/aAAgBAQABPxC0kJeqxdTKFKrVp1HqGzE+R5ndeuL/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/1cc432d60f7f229c9e8cb1c1488fcd85/8ac56/server-11.webp 240w,\n/static/1cc432d60f7f229c9e8cb1c1488fcd85/d3be9/server-11.webp 480w,\n/static/1cc432d60f7f229c9e8cb1c1488fcd85/e46b2/server-11.webp 960w,\n/static/1cc432d60f7f229c9e8cb1c1488fcd85/260c2/server-11.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/1cc432d60f7f229c9e8cb1c1488fcd85/09b79/server-11.jpg 240w,\n/static/1cc432d60f7f229c9e8cb1c1488fcd85/7cc5e/server-11.jpg 480w,\n/static/1cc432d60f7f229c9e8cb1c1488fcd85/6a068/server-11.jpg 960w,\n/static/1cc432d60f7f229c9e8cb1c1488fcd85/47311/server-11.jpg 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/1cc432d60f7f229c9e8cb1c1488fcd85/6a068/server-11.jpg\"\n          alt=\"Using Github &#39;actions&#39;\"\n          title=\"Using Github &#39;actions&#39;\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>This is what happened to my blog repository. It turns out that every time the LTS version of the NodeJS library is released, it is added to the <a href=\"https://github.com/actions/virtual-environments/issues/1953\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub pipelined image</a>. What caused this? Status failed on my site build pipeline. The solution was to update the packages or lock for the nodejs version. I originally wanted to fix this with another 3 steps in workflow that would allow me to enable the old version of NodeJS (along with <code class=\"language-text\">apt-get update</code> and other commands). The problem is that such steps increase the execution time of the action terribly. Fortunately, it turned out that it was also possible to use the main GitHub Actions feature, the <a href=\"https://github.com/actions/setup-node\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">actions themselves</a>. As it turns out, with the use of simple 3 lines, we can be sure that our environment will have the correct version of NodeJS, and changing it is only one parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v2\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>node@v2\n  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">node-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'14'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm install\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> npm test</code></pre></div>\n<p>The use of template actions is definitely a big advantage of GitHub. It will definitely come in handy for everyone more than once as performing some kind of automation, version lock, testing the environment and much more.</p>","fields":{"slug":"/posts/using-github-actions","tagSlugs":["/tag/technology/","/tag/ops-dev-ops/"]},"frontmatter":{"date":"2021-12-09T17:47:29.000Z","description":"When creating pipelines, we often use already-made code we've written ourselves in previous projects. Whether in GitHub Actions we can replace them with maintained actions!","tags":["Technology","Ops / DevOps"],"title":"Using Github 'actions'","socialImage":"media/server-11.jpg"}}},"pageContext":{"slug":"/posts/using-github-actions"}},"staticQueryHashes":["1797451822","251939775","401334301"]}