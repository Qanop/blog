{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/launch-multiple-wordpress-server-in-docker-way","result":{"data":{"markdownRemark":{"id":"4c52987b-1acf-5234-9109-265462160a72","html":"<p>If you want to run multiple WordPress sites and other services but don’t have time to configure each one with their specific library versions, you can set all in one big docker config. To run this all, you’ll need an app image itself, reverse proxy preferably with SSL automation and in most cases’ database.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e675a6d678f5769c36648cfdfe63fd90/47311/server-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAQFAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAABjvzO6ciwr//EABoQAAICAwAAAAAAAAAAAAAAAAECADIDEBL/2gAIAQEAAQUCxXdU5BQQW1//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAwEBPwGn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAQMFAAAAAAAAAAAAAAAAAAECERAiQVGR/9oACAEBAAY/AkkudOoMiHKf/8QAGxABAAICAwAAAAAAAAAAAAAAAQAREEFRgZH/2gAIAQEAAT8hpUBGEuXFAFPjG31h/9oADAMBAAIAAwAAABBoz//EABURAQEAAAAAAAAAAAAAAAAAABAx/9oACAEDAQE/EIf/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QTSf/xAAdEAACAgEFAAAAAAAAAAAAAAAAAREhYTGhscHw/9oACAEBAAE/EFiwbklh2rTSxSdkKJYT2jfrgWv1Qz//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/e675a6d678f5769c36648cfdfe63fd90/8ac56/server-1.webp 240w,\n/static/e675a6d678f5769c36648cfdfe63fd90/d3be9/server-1.webp 480w,\n/static/e675a6d678f5769c36648cfdfe63fd90/e46b2/server-1.webp 960w,\n/static/e675a6d678f5769c36648cfdfe63fd90/260c2/server-1.webp 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/e675a6d678f5769c36648cfdfe63fd90/09b79/server-1.jpg 240w,\n/static/e675a6d678f5769c36648cfdfe63fd90/7cc5e/server-1.jpg 480w,\n/static/e675a6d678f5769c36648cfdfe63fd90/6a068/server-1.jpg 960w,\n/static/e675a6d678f5769c36648cfdfe63fd90/47311/server-1.jpg 1080w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/e675a6d678f5769c36648cfdfe63fd90/6a068/server-1.jpg\"\n          alt=\"Launch multiple WordPress server in docker way\"\n          title=\"Launch multiple WordPress server in docker way\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Example below should launch multiple instances of sites, configure them to connect to local database running on host machine, allow reverse-proxy and maintain SSL certificates. </p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'3'</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n\n  <span class=\"token comment\">#  -----------------------------------------------</span>\n  <span class=\"token comment\">#  | Set reverse proxy to handle traffic</span>\n  <span class=\"token comment\">#  -----------------------------------------------</span>\n  <span class=\"token key atrule\">reverse-proxy</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jwilder/nginx<span class=\"token punctuation\">-</span>proxy\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"80:80\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"443:443\"</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./certs<span class=\"token punctuation\">:</span>/etc/nginx/certs\n      <span class=\"token punctuation\">-</span> /etc/nginx/vhost.d\n      <span class=\"token punctuation\">-</span> /usr/share/nginx/html\n      <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/tmp/docker.sock<span class=\"token punctuation\">:</span>ro\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> com.github.jrcs.letsencrypt_nginx_proxy_companion.nginx_proxy\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped\n\n  <span class=\"token comment\">#  -----------------------------------------------</span>\n  <span class=\"token comment\">#  | Set letsencrypt to menage SSL</span>\n  <span class=\"token comment\">#  -----------------------------------------------</span>\n  <span class=\"token key atrule\">letsencrypt-nginx-proxy-companion</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> jrcs/letsencrypt<span class=\"token punctuation\">-</span>nginx<span class=\"token punctuation\">-</span>proxy<span class=\"token punctuation\">-</span>companion\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"80:80\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token string\">\"443:443\"</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./certs<span class=\"token punctuation\">:</span>/etc/nginx/certs<span class=\"token punctuation\">:</span>rw\n      <span class=\"token punctuation\">-</span> /var/run/docker.sock<span class=\"token punctuation\">:</span>/var/run/docker.sock<span class=\"token punctuation\">:</span>ro\n    <span class=\"token key atrule\">volumes_from</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> reverse<span class=\"token punctuation\">-</span>proxy\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped\n\n<span class=\"token comment\">#  -----------------------------------------------</span>\n<span class=\"token comment\">#  | Set services</span>\n<span class=\"token comment\">#  -----------------------------------------------</span>\n  <span class=\"token key atrule\">wordpress_app1_name</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wordpress<span class=\"token punctuation\">:</span>php7.2\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> WORDPRESS_DB_HOST=host.docker.internal<span class=\"token punctuation\">:</span><span class=\"token number\">3306</span>\n      <span class=\"token punctuation\">-</span> WORDPRESS_DB_USER=db1user\n      <span class=\"token punctuation\">-</span> WORDPRESS_DB_PASSWORD=password\n      <span class=\"token punctuation\">-</span> VIRTUAL_HOST=www.app1_host.com\n      <span class=\"token punctuation\">-</span> LETSENCRYPT_HOST=www.app1_host.com\n      <span class=\"token punctuation\">-</span> LETSENCRYPT_EMAIL=confirmation_email@app1_host.com\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./app_1_volume<span class=\"token punctuation\">:</span>/var/www/html\n      <span class=\"token punctuation\">-</span> ./app_1_uploads.ini<span class=\"token punctuation\">:</span>/usr/local/etc/php/conf.d/uploads.ini\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped\n    \n    \n  <span class=\"token key atrule\">wordpress_app2_name</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> wordpress<span class=\"token punctuation\">:</span>php5.6\n    <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> WORDPRESS_DB_HOST=host.docker.internal<span class=\"token punctuation\">:</span><span class=\"token number\">3306</span>\n      <span class=\"token punctuation\">-</span> WORDPRESS_DB_USER=db1user\n      <span class=\"token punctuation\">-</span> WORDPRESS_DB_PASSWORD=password\n      <span class=\"token punctuation\">-</span> VIRTUAL_HOST=www.app1_host.com\n      <span class=\"token punctuation\">-</span> LETSENCRYPT_HOST=www.app1_host.com\n      <span class=\"token punctuation\">-</span> LETSENCRYPT_EMAIL=confirmation_email@app1_host.com\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> ./app_2_volume<span class=\"token punctuation\">:</span>/var/www/html\n      <span class=\"token punctuation\">-</span> ./app_2_uploads.ini<span class=\"token punctuation\">:</span>/usr/local/etc/php/conf.d/uploads.ini\n    <span class=\"token key atrule\">restart</span><span class=\"token punctuation\">:</span> unless<span class=\"token punctuation\">-</span>stopped</code></pre></div>","fields":{"slug":"/posts/launch-multiple-wordpress-server-in-docker-way","tagSlugs":["/tag/technology/","/tag/ops-dev-ops/"]},"frontmatter":{"date":"2021-11-21T19:23:17.000Z","description":"If you want to run multiple WordPress sites and other services but don't have time to configure each one with their specific library versions, you can set all in one big docker config","tags":["Technology","Ops / DevOps"],"title":"Launch multiple WordPress server in docker way","socialImage":"media/server-1.jpg"}}},"pageContext":{"slug":"/posts/launch-multiple-wordpress-server-in-docker-way"}},"staticQueryHashes":["1797451822","251939775","401334301"]}